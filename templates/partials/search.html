<style>
/* ========================================== */
/* IMPORTANTE: INICIALIZA√á√ÉO DO COMPONENTE */
/* ========================================== */
/*
   Para evitar erros do Alpine.js, garanta que o componente
   searchComponent() inicialize categorizedResults com:
   
   categorizedResults: {
       artists: [],
       playlists: [],
       songs: [],
       albums: []
   }
   
   Isso deve ser feito no arquivo app.js na fun√ß√£o searchComponent()
*/

/* ========================================== */
/* ALPINE.JS - CLOAK PARA EVITAR FLASH */
/* ========================================== */
[x-cloak] {
    display: none !important;
}

/* ========================================== */
/* SCROLL HORIZONTAL - ARTISTAS E PLAYLISTS */
/* ========================================== */

/* Container de Scroll */
.scroll-container {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
    overflow-y: visible;
    padding: 1rem 0.5rem 1.5rem;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: rgba(6, 182, 212, 0.5) rgba(30, 41, 59, 0.3);
    max-width: 80rem; /* max-w-7xl - Limita largura em telas grandes */
    margin-left: auto;
    margin-right: auto;
}

/* Scrollbar Personalizada (Webkit) */
.scroll-container::-webkit-scrollbar {
    height: 8px;
}

.scroll-container::-webkit-scrollbar-track {
    background: rgba(30, 41, 59, 0.3);
    border-radius: 10px;
    margin: 0 1rem;
}

.scroll-container::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, rgba(6, 182, 212, 0.6), rgba(59, 130, 246, 0.6));
    border-radius: 10px;
    transition: all 0.3s ease;
}

.scroll-container::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(90deg, rgba(6, 182, 212, 0.9), rgba(59, 130, 246, 0.9));
}

/* Cards de Artistas e Playlists - Scroll Horizontal */
#search-artists-section .artist-card,
#search-playlists-section-scroll .playlist-card {
    flex-shrink: 0;
    width: 200px;
    min-height: 280px;
    display: flex;
    flex-direction: column;
}

#search-artists-section .artist-card:focus,
#search-playlists-section-scroll .playlist-card:focus {
    outline: 2px solid rgba(6, 182, 212, 0.5);
    outline-offset: 4px;
}

/* Garantir altura fixa dos t√≠tulos para cards uniformes */
#search-artists-section .artist-card .artist-card-title,
#search-playlists-section-scroll .playlist-card .playlist-card-title {
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    min-height: 2.5rem !important;
    max-height: 2.5rem !important;
    height: 2.5rem !important;
    line-height: 1.25rem !important;
    word-break: break-word !important;
    white-space: normal !important;
}

#search-artists-section .artist-card .artist-card-type,
#search-playlists-section-scroll .playlist-card .playlist-card-author {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Garantir que os wrappers de imagem n√£o quebrem o layout */
#search-artists-section .artist-card .artist-card-image-wrapper,
#search-playlists-section-scroll .playlist-card .playlist-card-image-wrapper {
    flex-shrink: 0;
}

/* Layout flexbox para conte√∫do de texto */
#search-artists-section .artist-card > div:last-child,
#search-playlists-section-scroll .playlist-card > div:last-child {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

/* Garantir ellipsis em t√≠tulos longos - Suporte universal */
.playlist-card-title,
.artist-card-title,
.music-card-title,
.album-card-title {
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    line-height: 1.25rem !important;
}

/* ========================================== */
/* BOT√ïES DE NAVEGA√á√ÉO - DESIGN MODERNO */
/* ========================================== */

.scroll-nav-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Glassmorphism com gradiente */
    background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15));
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1.5px solid rgba(6, 182, 212, 0.4);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(6, 182, 212, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.scroll-nav-button::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: radial-gradient(circle at center, rgba(6, 182, 212, 0.2), transparent 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.scroll-nav-button:hover::before {
    opacity: 1;
}

.scroll-nav-button:hover {
    background: linear-gradient(135deg, rgba(6, 182, 212, 0.3), rgba(59, 130, 246, 0.3));
    border-color: rgba(6, 182, 212, 0.7);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5),
                0 0 40px rgba(6, 182, 212, 0.6),
                0 0 60px rgba(6, 182, 212, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.15);
    transform: translateY(-50%) scale(1.1);
}

.scroll-nav-button:active {
    transform: translateY(-50%) scale(0.95);
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.6),
                0 0 30px rgba(6, 182, 212, 0.8),
                inset 0 2px 8px rgba(0, 0, 0, 0.2);
}

.scroll-nav-button i {
    font-size: 20px;
    color: white;
    text-shadow: 0 0 10px rgba(6, 182, 212, 0.8),
                 0 0 20px rgba(6, 182, 212, 0.5);
    transition: all 0.3s ease;
}

.scroll-nav-button:hover i {
    text-shadow: 0 0 15px rgba(6, 182, 212, 1),
                 0 0 30px rgba(6, 182, 212, 0.7);
    transform: scale(1.1);
}

/* Posicionamento */
.scroll-nav-button.left {
    left: -24px;
}

.scroll-nav-button.right {
    right: -24px;
}

/* ========================================== */
/* BREAKPOINTS RESPONSIVOS */
/* ========================================== */

/* Mobile: cards menores */
@media (max-width: 639px) {
    #search-artists-section .artist-card,
    #search-playlists-section-scroll .playlist-card {
        width: 150px !important;
        min-height: 250px !important;
        height: 250px !important;
    }
    
    .scroll-nav-button {
        width: 40px;
        height: 40px;
    }
    
    .scroll-nav-button i {
        font-size: 16px;
    }
    
    .scroll-nav-button.left {
        left: -12px;
    }
    
    .scroll-nav-button.right {
        right: -12px;
    }
}

/* Tablet */
@media (min-width: 640px) and (max-width: 1023px) {
    #search-artists-section .artist-card,
    #search-playlists-section-scroll .playlist-card {
        width: 180px !important;
        min-height: 270px !important;
        height: 270px !important;
    }
}

/* Desktop M√©dio: 1024px - 1439px */
@media (min-width: 1024px) and (max-width: 1439px) {
    #search-artists-section .artist-card,
    #search-playlists-section-scroll .playlist-card {
        width: 200px !important;
        min-height: 280px !important;
        height: 280px !important;
    }
    
    .scroll-container {
        gap: 1.75rem;
    }
}

/* Desktop Large */
@media (min-width: 1440px) {
    #search-artists-section .artist-card,
    #search-playlists-section-scroll .playlist-card {
        width: 220px !important;
        min-height: 300px !important;
        height: 300px !important;
    }
    
    .scroll-container {
        gap: 2rem;
    }
}

/* ========================================== */
/* CARD HERO - LAYOUT RESPONSIVO */
/* ========================================== */

/* Desktop/Tablet: Layout Horizontal */
#artist-hero-layout {
    display: flex;
    flex-direction: row;
    gap: 1.5rem;
    align-items: flex-start;
}

/* Mobile: Layout Vertical */
@media (max-width: 639px) {
    #artist-hero-layout {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    #artist-hero-layout img {
        width: 140px !important;
        height: 140px !important;
    }
    
    /* Ajustar bot√µes em grid 2 colunas */
    #artist-hero-layout .flex.flex-wrap {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
        width: 100%;
    }
    
    #artist-hero-layout button {
        font-size: 0.8rem;
        padding: 0.5rem 1rem;
        justify-content: center;
    }
    
    /* Centralizar texto em mobile */
    #artist-hero-layout h2,
    #artist-hero-layout p {
        text-align: center;
    }
}

/* ========================================== */
/* CARD HERO - TOP M√öSICAS SCROLLBAR */
/* ========================================== */
.top-songs-list {
    scrollbar-width: thin;
    scrollbar-color: rgba(6, 182, 212, 0.5) rgba(30, 41, 59, 0.3);
}

.top-songs-list::-webkit-scrollbar {
    width: 6px;
}

.top-songs-list::-webkit-scrollbar-track {
    background: rgba(30, 41, 59, 0.3);
    border-radius: 10px;
}

.top-songs-list::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(6, 182, 212, 0.6), rgba(59, 130, 246, 0.6));
    border-radius: 10px;
}

.top-songs-list::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, rgba(6, 182, 212, 0.9), rgba(59, 130, 246, 0.9));
}

/* ========================================== */
/* BOT√ÉO CARREGAR MAIS - ANIMA√á√ïES */
/* ========================================== */

@keyframes spin-slow {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes pulse-icon {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.1);
        opacity: 0.8;
    }
}

/* ========================================== */
/* SEARCH INPUT - RESPONSIVIDADE */
/* ========================================== */

/* Mobile: ajustar padding e tamanhos */
@media (max-width: 639px) {
    .search-input-container {
        padding: 0 1rem;
    }
    
    .search-input {
        padding: 16px 50px 16px 45px !important;
        font-size: 14px !important;
    }
    
    .search-icon {
        left: 16px !important;
        font-size: 16px !important;
    }
    
    /* Esconder bot√£o de buscar, mostrar apenas √≠cone */
    .search-submit-btn {
        padding: 12px 16px !important;
        right: 4px !important;
        font-size: 14px !important;
    }
    
    .search-btn-text {
        display: none;
    }
    
    .search-submit-btn i {
        margin-right: 0 !important;
    }
    
    /* Esconder bot√£o limpar em mobile para economizar espa√ßo */
    .search-clear-btn {
        display: none !important;
    }
    
    /* Ajustar header de busca */
    .search-page h2 {
        font-size: 2rem !important;
    }
    
    .search-page p {
        font-size: 1rem !important;
    }
    
    /* Bot√£o Carregar Mais - Mobile */
    .load-more-btn {
        padding: 12px 32px !important;
        font-size: 14px !important;
    }
    
    .load-more-btn span span {
        font-size: 13px !important;
    }
    
    .load-more-btn i {
        font-size: 14px !important;
    }
}

/* Tablet: ajustes intermedi√°rios */
@media (min-width: 640px) and (max-width: 1023px) {
    .search-input {
        padding: 20px 160px 20px 55px !important;
        font-size: 16px !important;
    }
    
    .search-submit-btn {
        padding: 12px 24px !important;
        font-size: 15px !important;
    }
    
    /* Bot√£o Carregar Mais - Tablet */
    .load-more-btn {
        padding: 14px 40px !important;
        font-size: 15px !important;
    }
}
</style>

<div class="search-page search-results p-6" x-data="searchComponent()">
    <!-- Search Header com Glassmorphism -->
    <div class="modern-search-hero">
        <!-- √çcone animado com glassmorphism -->
        <div class="search-icon-glass">
            <div class="search-icon-glow"></div>
            <i class="fas fa-music"></i>
        </div>
        
        <!-- T√≠tulo com gradiente -->
        <h2 class="search-hero-title">
            Busque sua m√∫sica favorita
        </h2>
        <p class="search-hero-subtitle">
            Descubra milh√µes de m√∫sicas, artistas e playlists
        </p>
        
        <!-- Search Box Glassmorphism -->
        <div class="glass-search-container">
            <label for="mainSearchInput" class="sr-only">Buscar m√∫sicas, artistas ou playlists</label>
            
            <div class="glass-search-box">
                <!-- √çcone de busca -->
                <div class="glass-search-icon">
                    <i class="fas fa-search"></i>
                </div>
                
                <!-- Input -->
                <input 
                    type="text" 
                    id="mainSearchInput"
                    name="mainSearchQuery"
                    placeholder="Digite o nome da m√∫sica, artista ou playlist..."
                    class="glass-search-input"
                    x-model="searchQuery"
                    @input.debounce.200ms="performSearch()"
                    @keyup.enter="performSearch()"
                >
                
                <!-- Bot√£o limpar -->
                <button 
                    x-show="searchQuery.length > 0"
                    @click="searchQuery = ''; searchResults = []"
                    type="button"
                    class="glass-clear-btn"
                    title="Limpar busca">
                    <i class="fas fa-times"></i>
                </button>
                
                <!-- Bot√£o Buscar -->
                <button 
                    @click="performSearch()"
                    type="button"
                    class="glass-submit-btn"
                    title="Buscar">
                    <i class="fas fa-search"></i>
                    <span>Buscar</span>
                </button>
            </div>
            
            <!-- Loading indicator -->
            <div x-show="isLoading" class="glass-loading" x-transition>
                <div class="glass-loading-spinner">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
                <span>Buscando m√∫sicas...</span>
            </div>
        </div>
    </div>

    <!-- Filtros Modernos - Glassmorphism Premium -->
    <div x-show="searchResults.length > 0" x-transition class="mb-8">
        <div class="flex flex-wrap justify-center gap-3 max-w-5xl mx-auto px-4">
            <button @click="filterType = 'all'" 
                    :class="filterType === 'all' ? 'filter-button-modern active' : 'filter-button-modern'"
                    class="px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200">
                <i class="fas fa-th-large mr-2 text-xs icon-glow"></i>
                <span>Tudo</span>
            </button>
            <button @click="filterType = 'songs'" 
                    :class="filterType === 'songs' ? 'filter-button-modern active' : 'filter-button-modern'"
                    class="px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200">
                <i class="fas fa-music mr-2 text-xs icon-glow"></i>
                <span>M√∫sicas</span>
            </button>
            <button @click="filterType = 'albums'" 
                    :class="filterType === 'albums' ? 'filter-button-modern active' : 'filter-button-modern'"
                    class="px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200">
                <i class="fas fa-compact-disc mr-2 text-xs icon-glow"></i>
                <span>√Ålbuns</span>
            </button>
            <button @click="filterType = 'artists'" 
                    :class="filterType === 'artists' ? 'filter-button-modern active' : 'filter-button-modern'"
                    class="px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200">
                <i class="fas fa-user-music mr-2 text-xs icon-glow"></i>
                <span>Artistas</span>
            </button>
            <button @click="filterType = 'playlists'" 
                    :class="filterType === 'playlists' ? 'filter-button-modern active' : 'filter-button-modern'"
                    class="px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200">
                <i class="fas fa-list-music mr-2 text-xs icon-glow"></i>
                <span>Playlists</span>
            </button>
        </div>
    </div>

    <!-- Search Results -->
    <div x-show="searchResults.length > 0" x-transition class="mt-8">
        
        <!-- ========================================== -->
        <!-- SE√á√ÉO ARTISTAS - Scroll Horizontal -->
        <!-- ========================================== -->
        <div id="search-artists-section"
             x-show="categorizedResults.artists && categorizedResults.artists.length > 0 && (filterType === 'all' || filterType === 'artists')" 
             x-cloak
             class="mb-12 transition-all duration-300">
            
            <!-- CARD HERO - ESTILO SPOTIFY (2 COLUNAS) -->
            <div x-show="mainArtist"
                 x-init="if (mainArtist) { console.log('üé® CARD HERO RENDERIZANDO:', mainArtist); console.log('üé® Nome que ser√° exibido:', mainArtist?.artist || mainArtist?.name); }"
                 class="artist-hero-card">
                
                <div id="spotify-layout">
                    
                    <!-- COLUNA ESQUERDA: Melhor resultado -->
                    <div id="best-result-column">
                        <!-- T√≠tulo "Melhor resultado" -->
                        <h3 class="section-header-title">
                            Melhor resultado
                        </h3>
                        
                        <!-- Card do Artista -->
                        <div @click="handleItemClick(mainArtist)" 
                             class="artist-hero-card-hover">
                            
                            <!-- Foto redonda grande -->
                            <div class="relative group flex-shrink-0 mb-6">
                                <div class="artist-hero-image-glow"></div>
                                <img :src="getHighResThumbnail(mainArtist?.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                                     :alt="mainArtist?.artist || mainArtist?.name || 'Artista'"
                                     class="artist-hero-image"
                                     onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                            </div>
                            
                            <!-- Nome do artista -->
                            <h2 class="artist-hero-name" 
                                x-text="mainArtist?.artist || mainArtist?.name || 'Artista'"></h2>
                            
                            <!-- Badge "Artista" -->
                            <p class="artist-hero-badge">
                                Artista
                            </p>
                        </div>
                    </div>
                    
                    <!-- COLUNA DIREITA: M√∫sicas -->
                    <div id="songs-column">
                        <!-- T√≠tulo "M√∫sicas" -->
                        <h3 class="section-header-title">
                            M√∫sicas
                        </h3>
                        
                        <!-- Loading State -->
                        <div x-show="loadingSongs" style="display: flex; align-items: center; gap: 0.5rem; color: #9ca3af;">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>Carregando...</span>
                        </div>
                        
                        <!-- Lista de M√∫sicas -->
                        <div x-show="!loadingSongs && topSongs.length > 0" 
                             class="top-songs-list"
                             style="display: flex; flex-direction: column; gap: 0.25rem;">
                            <template x-for="(song, index) in topSongs.slice(0, 5)" :key="song.videoId || index">
                                <div @click="playItem(song)"
                                     style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem; border-radius: 0.375rem; cursor: pointer; transition: all 0.2s;"
                                     onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'"
                                     onmouseout="this.style.background='transparent'">
                                    
                                    <!-- N√∫mero -->
                                    <div style="flex-shrink: 0; width: 1.5rem; color: #9ca3af; font-size: 0.875rem; font-weight: 500;"
                                         x-text="index + 1"></div>
                                    
                                    <!-- Thumbnail quadrada pequena -->
                                    <div class="thumbnail-wrapper">
                                        <img :src="getHighResThumbnail(song.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                                             :alt="song.title"
                                             class="thumbnail-img"
                                             onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                                    </div>
                                    
                                    <!-- Info -->
                                    <div style="flex: 1; min-width: 0;">
                                        <p style="color: white; font-weight: 400; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 0.875rem;"
                                           x-text="song.title"></p>
                                    </div>
                                    
                                    <!-- Duration √† direita -->
                                    <div style="flex-shrink: 0; color: #9ca3af; font-size: 0.875rem; font-weight: 400;"
                                         x-text="song.duration || ''"></div>
                                </div>
                            </template>
                        </div>
                        
                        <!-- Empty State -->
                        <div x-show="!loadingSongs && topSongs.length === 0" 
                             style="color: #6b7280; font-size: 0.875rem; font-style: italic; text-align: center; padding: 2rem;">
                            Nenhuma m√∫sica encontrada
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <!-- Header da Se√ß√£o - Outros Artistas -->
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white flex items-center gap-3">
                    <i class="fas fa-user-music text-cyan-400"></i>
                    <span>Outros Artistas</span>
                    <span class="text-gray-500 text-base font-normal" x-text="`(${limitedArtists.length - 1})`"></span>
                </h3>
            </div>
            
            <!-- Container com Scroll Horizontal -->
            <div class="relative" x-data="{ scrollContainer: null }" x-init="scrollContainer = $el.querySelector('.scroll-container')">
                
                <!-- Bot√£o Esquerda -->
                <button @click="scrollContainer.scrollBy({ left: -400, behavior: 'smooth' })"
                        class="scroll-nav-button left"
                        aria-label="Rolar artistas para a esquerda"
                        type="button">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <!-- Container de Scroll -->
                <div class="scroll-container" role="list" aria-label="Lista de artistas" aria-live="polite"
                     x-show="categorizedResults && categorizedResults.artists">
                    <!-- Loop de Artistas (excluindo o primeiro que est√° no card hero) -->
                    <template x-for="(artist, index) in (limitedArtists.slice(1))" :key="'artist-' + (artist?.browseId || index)">
                        <div class="artist-card"
                             @click="handleItemClick(artist)" 
                             :data-browse-id="artist?.browseId"
                             role="listitem"
                             tabindex="0"
                             @keydown.enter="handleItemClick(artist)"
                             @keydown.space.prevent="handleItemClick(artist)"
                             x-show="artist"
                             x-init="if (artist && !artist.name && !artist.artist) { console.warn('‚ö†Ô∏è Artista sem nome:', artist) }">
                            
                            <!-- Imagem do Artista -->
                            <div class="artist-card-image-wrapper">
                                <img :src="getHighResThumbnail(artist.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                                     :alt="artist.name || artist.artist || 'Artista'"
                                     class="artist-card-image"
                                     onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                            </div>
                            
                            <!-- Nome do Artista -->
                            <div class="artist-card-title" 
                                 x-text="artist.name || artist.artist || 'Artista Desconhecido'"
                                 :title="artist.name || artist.artist || 'Artista Desconhecido'"></div>
                            <div class="artist-card-type">Artista</div>
                        </div>
                    </template>
                </div>
                
                <!-- Bot√£o Direita -->
                <button @click="scrollContainer.scrollBy({ left: 400, behavior: 'smooth' })"
                        class="scroll-nav-button right"
                        aria-label="Rolar artistas para a direita"
                        type="button">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
            </div>
        </div>
        
        <!-- ========================================== -->
        <!-- SE√á√ÉO PLAYLISTS - Scroll Horizontal (apenas no filtro 'all') -->
        <!-- ========================================== -->
        <template x-if="categorizedResults?.playlists && Array.isArray(categorizedResults.playlists) && categorizedResults.playlists.length > 0 && filterType === 'all'">
        <div id="search-playlists-section-scroll"
             class="mb-12 transition-all duration-300">
            
            <!-- Header da Se√ß√£o -->
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white flex items-center gap-3">
                    <i class="fas fa-list-music text-cyan-400"></i>
                    <span>Playlists</span>
                    <span class="text-gray-500 text-base font-normal" x-text="`(${limitedPlaylists.length})`"></span>
                </h3>
            </div>
            
            <!-- Container com Scroll Horizontal -->
            <div class="relative" x-data="{ scrollContainer: null }" x-init="$nextTick(() => scrollContainer = $el.querySelector('.scroll-container'))">
                
                <!-- Bot√£o Esquerda -->
                <button @click="scrollContainer?.scrollBy({ left: -400, behavior: 'smooth' })"
                        class="scroll-nav-button left"
                        aria-label="Rolar playlists para a esquerda"
                        type="button">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <!-- Container de Scroll -->
                <div class="scroll-container" role="list" aria-label="Lista de playlists" aria-live="polite">
                    <!-- Loop de Playlists -->
                    <template x-for="(playlist, index) in limitedPlaylists" :key="'pl-scroll-' + (playlist?.browseId || index)">
                        <div class="playlist-card"
                             @click="handleItemClick(playlist)" 
                             :data-browse-id="playlist?.browseId"
                             role="listitem"
                             tabindex="0"
                             @keydown.enter="handleItemClick(playlist)"
                             @keydown.space.prevent="handleItemClick(playlist)">
                            
                            <!-- Imagem da Playlist -->
                            <div class="playlist-card-image-wrapper">
                                <img :src="getHighResThumbnail(playlist?.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                                     :alt="playlist?.title || 'Playlist'"
                                     class="playlist-card-image"
                                     onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                                <button class="playlist-card-play-button" @click.stop="handleItemClick(playlist)">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                            
                            <!-- T√≠tulo da Playlist -->
                            <div class="playlist-card-title" 
                                 x-text="playlist?.title || 'Playlist Desconhecida'"
                                 :title="playlist?.title || 'Playlist Desconhecida'"></div>
                            <div class="playlist-card-author">Playlist</div>
                        </div>
                    </template>
                </div>
                
                <!-- Bot√£o Direita -->
                <button @click="scrollContainer?.scrollBy({ left: 400, behavior: 'smooth' })"
                        class="scroll-nav-button right"
                        aria-label="Rolar playlists para a direita"
                        type="button">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
            </div>
        </div>
        </template>
        
        <!-- ========================================== -->
        <!-- SE√á√ÉO PLAYLISTS - Grid Moderno (Filtro Playlists) -->
        <!-- ========================================== -->
        <template x-if="categorizedResults?.playlists && categorizedResults.playlists.length > 0 && filterType === 'playlists'">
            <div id="search-playlists-section-grid" class="mb-12 transition-all duration-300">
                
                <!-- Header da Se√ß√£o -->
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-list-music text-cyan-400 mr-2"></i>
                        Playlists
                        <span class="text-gray-500 text-sm ml-2" x-text="`(${displayedPlaylistsCount})`"></span>
                    </h3>
                </div>
                
                <!-- Grid Responsivo de Playlists -->
                <div class="cards-grid">
                    <template x-for="(playlist, index) in (categorizedResults?.playlists?.slice(0, displayedPlaylistsCount) || [])" :key="'pl-grid-' + (playlist?.browseId || index)">
                        <div class="playlist-card"
                             @click="handleItemClick(playlist)" 
                             role="listitem"
                             tabindex="0"
                             @keydown.enter="handleItemClick(playlist)"
                             @keydown.space.prevent="handleItemClick(playlist)">
                            
                            <!-- Image Wrapper -->
                            <div class="playlist-card-image-wrapper">
                                <img :src="getHighResThumbnail(playlist?.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                                     :alt="playlist?.title || 'Playlist'"
                                     class="playlist-card-image"
                                     onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                                
                                <!-- Bot√£o Play -->
                                <button class="playlist-card-play-button" @click.stop="handleItemClick(playlist)" aria-label="Reproduzir playlist">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                            
                            <!-- T√≠tulo -->
                            <h4 class="playlist-card-title" 
                                x-text="playlist?.title || 'Playlist Desconhecida'"
                                :title="playlist?.title || 'Playlist Desconhecida'"></h4>
                            
                            <!-- Autor/Badge -->
                            <p class="playlist-card-author">
                                <i class="fas fa-list-music" style="font-size: 10px;"></i> Playlist
                            </p>
                        </div>
                    </template>
                </div>
                
                <!-- Bot√£o Mostrar Mais -->
                <div x-show="categorizedResults?.playlists && displayedPlaylistsCount < categorizedResults.playlists.length" class="flex justify-center mt-8">
                    <button @click="loadMorePlaylists()" 
                            class="group relative px-8 py-4 rounded-2xl font-bold text-base text-white transition-all duration-300 hover:scale-105"
                            style="background: linear-gradient(135deg, #00bcd4, #2563eb);
                                   box-shadow: 0 8px 24px rgba(0, 188, 212, 0.4), 0 0 48px rgba(0, 188, 212, 0.2);
                                   border: 1px solid rgba(255, 255, 255, 0.2);
                                   position: relative;
                                   overflow: hidden;"
                            onmouseover="this.style.boxShadow='0 12px 32px rgba(0, 188, 212, 0.6), 0 0 64px rgba(0, 188, 212, 0.3)'; this.style.transform='translateY(-2px) scale(1.05)'"
                            onmouseout="this.style.boxShadow='0 8px 24px rgba(0, 188, 212, 0.4), 0 0 48px rgba(0, 188, 212, 0.2)'; this.style.transform='translateY(0) scale(1)'"
                            onmousedown="this.style.transform='translateY(0) scale(0.98)'"
                            onmouseup="this.style.transform='translateY(-2px) scale(1.05)'">
                        
                        <!-- Efeito de brilho animado -->
                        <span style="position: absolute;
                                     inset: 0;
                                     background: radial-gradient(circle at center, rgba(6, 182, 212, 0.3), transparent 70%);
                                     opacity: 0;
                                     transition: opacity 0.3s ease;
                                     pointer-events: none;"
                              class="group-hover:opacity-100"></span>
                        
                        <!-- Conte√∫do do bot√£o -->
                        <span style="position: relative;
                                     display: flex;
                                     align-items: center;
                                     gap: 12px;
                                     z-index: 1;">
                            <i class="fas fa-list-music"
                               style="font-size: 18px;
                                      text-shadow: 0 0 10px rgba(6, 182, 212, 0.8);"></i>
                            <span x-text="`Carregar mais playlists (${Math.min(20, (categorizedResults?.playlists?.length || 0) - displayedPlaylistsCount)})`"></span>
                            <i class="fas fa-chevron-down"
                               style="font-size: 14px;
                                      text-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
                                      transition: transform 0.3s ease;"
                               class="group-hover:translate-y-1"></i>
                        </span>
                    </button>
                </div>
            </div>
        </template>
        
        <!-- Se√ß√£o M√∫sicas -->
        <div x-show="categorizedResults.songs && categorizedResults.songs.length > 0 && (filterType === 'all' || filterType === 'songs')"
             class="mb-12 transition-all duration-300">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white">
                    <i class="fas fa-music text-cyan-400 mr-2"></i>
                    M√∫sicas
                    <span class="text-gray-500 text-sm ml-2" x-text="`(${categorizedResults.songs.length})`"></span>
            </h3>
        </div>
        
        <!-- Grid de M√∫sicas -->
        <div class="cards-grid">
            <template x-for="song in categorizedResults.songs.slice(0, 20)" :key="song?.videoId || Math.random()">
                <div class="music-card" @click="handleItemClick(song)">
                    <div class="music-card-image-wrapper">
                        <img class="music-card-image" 
                             :src="getHighResThumbnail(song.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                             :alt="song.title"
                             onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                        <button class="music-card-play-button" @click.stop="playItem(song)">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                    <div class="music-card-title" x-text="song.title"></div>
                    <div class="music-card-artist" x-text="getArtistName(song)"></div>
                </div>
            </template>
        </div>
        </div>
            
            <!-- Bot√£o Carregar Mais M√∫sicas (REMOVIDO - agora carrega tudo de uma vez via HTMX) -->
            <div x-show="false" class="flex justify-center mt-8">
                <button @click="loadMoreSongs()"
                        class="load-more-btn group"
                        style="position: relative;
                               padding: 16px 48px;
                               background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15));
                               backdrop-filter: blur(20px);
                               -webkit-backdrop-filter: blur(20px);
                               border: 2px solid rgba(6, 182, 212, 0.4);
                               border-radius: 50px;
                               color: white;
                               font-weight: 600;
                               font-size: 16px;
                               cursor: pointer;
                               transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                               box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                                           0 0 20px rgba(6, 182, 212, 0.2),
                                           inset 0 1px 0 rgba(255, 255, 255, 0.1);
                               overflow: hidden;"
                        onmouseover="this.style.background='linear-gradient(135deg, rgba(6, 182, 212, 0.3), rgba(59, 130, 246, 0.3))';
                                    this.style.borderColor='rgba(6, 182, 212, 0.7)';
                                    this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.4), 0 0 40px rgba(6, 182, 212, 0.5), inset 0 2px 4px rgba(255, 255, 255, 0.15)';
                                    this.style.transform='translateY(-2px) scale(1.05)'"
                        onmouseout="this.style.background='linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15))';
                                   this.style.borderColor='rgba(6, 182, 212, 0.4)';
                                   this.style.boxShadow='0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(6, 182, 212, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)';
                                   this.style.transform='translateY(0) scale(1)'"
                        onmousedown="this.style.transform='translateY(0) scale(0.98)'"
                        onmouseup="this.style.transform='translateY(-2px) scale(1.05)'">
                    
                    <!-- Efeito de brilho animado -->
                    <span style="position: absolute;
                                 inset: 0;
                                 background: radial-gradient(circle at center, rgba(6, 182, 212, 0.3), transparent 70%);
                                 opacity: 0;
                                 transition: opacity 0.3s ease;
                                 pointer-events: none;"
                          class="group-hover:opacity-100"></span>
                    
                    <!-- Conte√∫do do bot√£o -->
                    <span style="position: relative;
                                 display: flex;
                                 align-items: center;
                                 gap: 12px;
                                 z-index: 1;">
                        <i class="fas fa-music"
                           style="font-size: 18px;
                                  text-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
                                  animation: pulse-icon 2s ease-in-out infinite;"></i>
                        <span x-text="`Carregar mais m√∫sicas (${Math.min(20, categorizedResults.songs.length - displayedSongs.length)})`"></span>
                        <i class="fas fa-chevron-down"
                           style="font-size: 14px;
                                  text-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
                                  transition: transform 0.3s ease;"
                           class="group-hover:translate-y-1"></i>
                    </span>
                </button>
            </div>
        </div>
        
        <!-- Se√ß√£o √Ålbuns (Grid Normal com Pagina√ß√£o) -->
        <div x-show="categorizedResults.albums && categorizedResults.albums.length > 0 && (filterType === 'all' || filterType === 'albums')"
             class="mb-12 transition-all duration-300"
             x-data="{ 
                 displayedAlbumsCount: 20,
                 get displayedAlbums() {
                     if (!categorizedResults?.albums || !Array.isArray(categorizedResults.albums)) {
                         return [];
                     }
                     // No filtro all usar limitedAlbums (10 albuns)
                     if (filterType === 'all') {
                         return limitedAlbums;
                     }
                     return categorizedResults.albums.slice(0, this.displayedAlbumsCount);
                 },
                 get hasMoreAlbums() {
                     if (!categorizedResults?.albums || !Array.isArray(categorizedResults.albums)) {
                         return false;
                     }
                     // No filtro all, nao mostrar botao carregar mais
                     if (filterType === 'all') {
                         return false;
                     }
                     return categorizedResults.albums.length > this.displayedAlbumsCount;
                 },
                 loadMoreAlbums() {
                     this.$nextTick(() => {
                         this.displayedAlbumsCount += 20;
                     });
                 }
             }"
             x-init="
                 displayedAlbumsCount = 20;
                 $watch('filterType', () => { displayedAlbumsCount = 20; });
                 $watch('searchResults', () => { displayedAlbumsCount = 20; });
             ">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white">
                    <i class="fas fa-compact-disc text-cyan-400 mr-2"></i>
                    √Ålbuns
                    <span class="text-gray-500 text-sm ml-2" x-text="`(${displayedAlbums.length})`"></span>
                </h3>
            </div>
            
            <div class="cards-grid">
                <template x-for="album in (displayedAlbums || [])" :key="album?.browseId || Math.random()">
                    <div class="music-card" @click="openAlbumFromCard($el)" :data-browse-id="album.browseId">
                        <div class="music-card-image-wrapper">
                            <img class="music-card-image" 
                                 :src="getHighResThumbnail(album.thumbnails?.[0]?.url) || '/static/images/placeholder.jpg'"
                                 :alt="album.title"
                                 onerror="if(this.src !== '/static/images/placeholder.jpg') { this.src='/static/images/placeholder.jpg'; this.onerror=null; }">
                            <button class="music-card-play-button" @click.stop="playAlbumFromCard($el)">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                        <div class="music-card-title" x-text="album.title"></div>
                        <div class="music-card-artist" x-text="getArtistName(album)"></div>
                </div>
            </template>
            </div>
            
            <!-- Bot√£o Carregar Mais √Ålbuns (REMOVIDO - agora carrega tudo de uma vez via HTMX) -->
            <div x-show="false" class="flex justify-center mt-8">
                <button @click="loadMoreAlbums()"
                        class="load-more-btn group"
                        style="position: relative;
                               padding: 16px 48px;
                               background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15));
                               backdrop-filter: blur(20px);
                               -webkit-backdrop-filter: blur(20px);
                               border: 2px solid rgba(6, 182, 212, 0.4);
                               border-radius: 50px;
                               color: white;
                               font-weight: 600;
                               font-size: 16px;
                               cursor: pointer;
                               transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                               box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                                           0 0 20px rgba(6, 182, 212, 0.2),
                                           inset 0 1px 0 rgba(255, 255, 255, 0.1);
                               overflow: hidden;"
                        onmouseover="this.style.background='linear-gradient(135deg, rgba(6, 182, 212, 0.3), rgba(59, 130, 246, 0.3))';
                                    this.style.borderColor='rgba(6, 182, 212, 0.7)';
                                    this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.4), 0 0 40px rgba(6, 182, 212, 0.5), inset 0 2px 4px rgba(255, 255, 255, 0.15)';
                                    this.style.transform='translateY(-2px) scale(1.05)'"
                        onmouseout="this.style.background='linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15))';
                                   this.style.borderColor='rgba(6, 182, 212, 0.4)';
                                   this.style.boxShadow='0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(6, 182, 212, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)';
                                   this.style.transform='translateY(0) scale(1)'"
                        onmousedown="this.style.transform='translateY(0) scale(0.98)'"
                        onmouseup="this.style.transform='translateY(-2px) scale(1.05)'">
                    
                    <!-- Efeito de brilho animado -->
                    <span style="position: absolute;
                                 inset: 0;
                                 background: radial-gradient(circle at center, rgba(6, 182, 212, 0.3), transparent 70%);
                                 opacity: 0;
                                 transition: opacity 0.3s ease;
                                 pointer-events: none;"
                          class="group-hover:opacity-100"></span>
                    
                    <!-- Conte√∫do do bot√£o -->
                    <span style="position: relative;
                                 display: flex;
                                 align-items: center;
                                 gap: 12px;
                                 z-index: 1;">
                        <i class="fas fa-compact-disc"
                           style="font-size: 18px;
                                  text-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
                                  animation: spin-slow 3s linear infinite;"></i>
                        <span x-text="`Carregar mais √°lbuns (${Math.min(20, (categorizedResults.albums?.length || 0) - displayedAlbumsCount)})`"></span>
                        <i class="fas fa-chevron-down"
                           style="font-size: 14px;
                                  text-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
                                  transition: transform 0.3s ease;"
                           class="group-hover:translate-y-1"></i>
                    </span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Empty State - Agora gerenciado pelo servidor via HTMX -->
</div>
