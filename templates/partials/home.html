<style>
/* ‚ö° OTIMIZA√á√ïES HOME - ULTRA R√ÅPIDO */
.home-page {
    contain: layout style paint;
    content-visibility: auto;
}

.content-section {
    contain: layout style;
    will-change: contents;
}

.cards-grid {
    contain: layout style paint;
}

.music-card, .album-card, .podcast-card, .playlist-card, .artist-card {
    contain: layout style paint;
    will-change: transform;
}

.music-card-image, .album-card-image, .podcast-card-image, .playlist-card-image, .artist-card-image {
    will-change: transform;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* üî• SCROLL HORIZONTAL - ESTILO MODERNO */
.horizontal-scroll-container {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
    padding-bottom: 1rem;
}

.horizontal-scroll-container::-webkit-scrollbar {
    height: 8px;
}

.horizontal-scroll-container::-webkit-scrollbar-track {
    background: transparent;
}

.horizontal-scroll-container::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}

.horizontal-scroll-container::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

/* For√ßa flex quando cards-grid est√° dentro de horizontal-scroll */
.horizontal-scroll-container .cards-grid {
    display: flex !important;
    gap: 1rem;
    padding: 0.5rem 0;
    flex-wrap: nowrap;
}

/* Cards compactos no scroll horizontal */
.horizontal-scroll-container .music-card,
.horizontal-scroll-container .artist-card {
    min-width: 180px;
    max-width: 180px;
    flex-shrink: 0;
}

/* üéØ BOT√ïES DE NAVEGA√á√ÉO SCROLL */
.scroll-section-wrapper {
    position: relative;
}

.scroll-nav-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.scroll-nav-button:hover {
    background: rgba(0, 188, 212, 0.9);
    border-color: rgba(0, 188, 212, 0.5);
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
}

.scroll-nav-button:active {
    transform: translateY(-50%) scale(0.95);
}

.scroll-nav-button.left {
    left: -24px;
}

.scroll-nav-button.right {
    right: -24px;
}

.scroll-nav-button i {
    font-size: 1.25rem;
}

/* üì± ARRASTAR COM MOUSE E TOQUE */
.horizontal-scroll-container {
    cursor: grab;
    user-select: none;
    -webkit-overflow-scrolling: touch; /* Smooth scroll iOS */
}

.horizontal-scroll-container:active {
    cursor: grabbing;
}

.horizontal-scroll-container.dragging {
    scroll-behavior: auto !important; /* Desabilita smooth ao arrastar */
}

/* Ocultar bot√µes em telas pequenas */
@media (max-width: 768px) {
    .scroll-nav-button {
        display: none;
    }
}
</style>

<script>
// üéØ FUN√á√ÉO ALPINE PARA SCROLL HORIZONTAL COM DRAG
function scrollSection() {
    return {
        isDragging: false,
        startX: 0,
        startScrollLeft: 0,
        
        // ‚¨ÖÔ∏è Scroll para esquerda (bot√£o)
        scrollLeft() {
            if (this.$refs.container) {
                this.$refs.container.scrollBy({ left: -400, behavior: 'smooth' });
            }
        },
        
        // ‚û°Ô∏è Scroll para direita (bot√£o)
        scrollRight() {
            if (this.$refs.container) {
                this.$refs.container.scrollBy({ left: 400, behavior: 'smooth' });
            }
        },
        
        // üñ±Ô∏è Iniciar arrasto (mouse ou toque)
        startDrag(e) {
            this.isDragging = true;
            const container = this.$refs.container;
            container.classList.add('dragging');
            
            // Pegar posi√ß√£o X (mouse ou toque)
            const pageX = e.pageX || (e.touches && e.touches[0].pageX);
            this.startX = pageX - container.offsetLeft;
            this.startScrollLeft = container.scrollLeft;
            
            // Prevenir sele√ß√£o de texto ao arrastar
            e.preventDefault();
        },
        
        // üñ±Ô∏è Arrastar (mouse ou toque)
        drag(e) {
            if (!this.isDragging) return;
            
            e.preventDefault();
            const container = this.$refs.container;
            
            // Pegar posi√ß√£o X (mouse ou toque)
            const pageX = e.pageX || (e.touches && e.touches[0].pageX);
            const x = pageX - container.offsetLeft;
            const walk = (x - this.startX) * 2; // Multiplicar por 2 = scroll mais r√°pido
            
            container.scrollLeft = this.startScrollLeft - walk;
        },
        
        // üñ±Ô∏è Finalizar arrasto
        endDrag() {
            this.isDragging = false;
            const container = this.$refs.container;
            if (container) {
                container.classList.remove('dragging');
            }
        }
    }
}
</script>

<div class="home-page p-6">
    <!-- üî• Top M√∫sicas Brasil - Scroll Horizontal -->
    <section class="content-section mb-8" x-data="scrollSection()">
        <div class="section-header">
            <h2 class="section-title">üî• Top M√∫sicas - Brasil</h2>
            <a href="/pages/charts" class="section-show-all">Ver mais</a>
        </div>
        <div class="scroll-section-wrapper">
            <button @click="scrollLeft()" class="scroll-nav-button left" aria-label="Anterior" type="button">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div x-ref="container" 
                 class="horizontal-scroll-container" 
                 hx-get="/api/charts/songs/BR" 
                 hx-trigger="load" 
                 hx-swap="innerHTML"
                 @mousedown="startDrag($event)"
                 @mousemove="drag($event)"
                 @mouseup="endDrag()"
                 @mouseleave="endDrag()"
                 @touchstart="startDrag($event)"
                 @touchmove="drag($event)"
                 @touchend="endDrag()">
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                    <p class="mt-2 text-gray-400">Carregando...</p>
                </div>
            </div>
            <button @click="scrollRight()" class="scroll-nav-button right" aria-label="Pr√≥ximo" type="button">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </section>

    <!-- üé§ Top Artistas Brasil - Scroll Horizontal -->
    <section class="content-section mb-8" x-data="scrollSection()">
        <div class="section-header">
            <h2 class="section-title">üé§ Top Artistas - Brasil</h2>
            <a href="/pages/charts" class="section-show-all">Ver mais</a>
        </div>
        <div class="scroll-section-wrapper">
            <button @click="scrollLeft()" class="scroll-nav-button left" aria-label="Anterior" type="button">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div x-ref="container" 
                 class="horizontal-scroll-container" 
                 hx-get="/api/charts/artists/BR" 
                 hx-trigger="load" 
                 hx-swap="innerHTML"
                 @mousedown="startDrag($event)"
                 @mousemove="drag($event)"
                 @mouseup="endDrag()"
                 @mouseleave="endDrag()"
                 @touchstart="startDrag($event)"
                 @touchmove="drag($event)"
                 @touchend="endDrag()">
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                    <p class="mt-2 text-gray-400">Carregando...</p>
                </div>
            </div>
            <button @click="scrollRight()" class="scroll-nav-button right" aria-label="Pr√≥ximo" type="button">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </section>

    <!-- Em Alta Agora -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Em Alta Agora</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/trending-songs" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Novos Lan√ßamentos (√Ålbuns) -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Novos Lan√ßamentos</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/new-releases" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Podcasts em Alta -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Podcasts em Alta</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/trending-podcasts" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Top Charts (Pa√≠s Selecionado) -->
    <section class="content-section mb-8">
        <h2 class="section-title">üî• Top M√∫sicas - Brasil</h2>
        <div hx-get="/api/charts/songs/BR" 
             hx-trigger="load, countryChanged from:body" 
             hx-swap="innerHTML"
             id="charts-songs-section">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Explorar por Humor -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Explorar por Humor</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/moods-preview" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>
</div>

