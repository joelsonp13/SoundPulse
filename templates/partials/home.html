<div class="home-page p-6">
    <!-- Em Alta Agora -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Em Alta Agora</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/trending-songs" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Novos Lançamentos (Álbuns) -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Novos Lançamentos</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/new-releases" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Podcasts em Alta -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Podcasts em Alta</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/trending-podcasts" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Top Charts (País Selecionado) -->
    <section class="content-section mb-8">
        <h2 class="section-title">🔥 Top Músicas - Brasil</h2>
        <div hx-get="/api/charts/songs/BR" 
             hx-trigger="load, countryChanged from:body" 
             hx-swap="innerHTML"
             id="charts-songs-section">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>

    <!-- Explorar por Humor -->
    <section class="content-section mb-8">
        <div class="section-header">
            <h2 class="section-title">Explorar por Humor</h2>
            <a href="#" class="section-show-all">Mostrar tudo</a>
        </div>
        <div hx-get="/api/moods-preview" hx-trigger="load" hx-swap="innerHTML">
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-cyan-500 text-2xl"></i>
                <p class="mt-2 text-gray-400">Carregando...</p>
            </div>
        </div>
    </section>
</div>

<!-- Script para forçar carregamento automático quando a página home é acessada diretamente -->
<script>
// Função para forçar carregamento de elementos HTMX
function forceLoadHTMXElements() {
    // Aguardar um pouco para garantir que o HTMX está pronto
    setTimeout(() => {
        // Forçar carregamento de todos os elementos com hx-trigger="load"
        const loadElements = document.querySelectorAll('[hx-trigger="load"]');
        console.log('🔄 Forçando carregamento de', loadElements.length, 'elementos HTMX');
        
        loadElements.forEach(element => {
            if (element.getAttribute('hx-get')) {
                console.log('🔄 Carregando:', element.getAttribute('hx-get'));
                htmx.trigger(element, 'load');
            }
        });
    }, 200);
}

// Executar quando o DOM estiver pronto
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', forceLoadHTMXElements);
} else {
    forceLoadHTMXElements();
}

// Também executar quando o HTMX terminar de processar
document.addEventListener('htmx:afterSwap', function(event) {
    if (event.target.id === 'main-content') {
        console.log('🔄 HTMX afterSwap detectado, forçando carregamento...');
        forceLoadHTMXElements();
    }
});
</script>

